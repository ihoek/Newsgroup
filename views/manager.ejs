<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- css -->
    <link rel="stylesheet" href="static/css/manager.css" />
    <!-- Bootstrap -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <!-- axios -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <!-- alert -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <!-- Editor's Style -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/codemirror.min.css"
    />
    <link
      rel="stylesheet"
      href="https://uicdn.toast.com/editor/latest/toastui-editor.css"
    />

    <title>Document</title>
  </head>
  <body>
    <div class="container">
      <div class="registration">
        <form name="form_upload" encType="multipart/form-data">
          <div class="main">
            <div class="main_top">
              <div class="main_left">
                <div class="preview_image">미리보기 화면</div>
                <input
                  type="file"
                  name="userfile"
                  accept="image/*"
                  onchange="readURL(this)"
                />
              </div>
              <div class="main_right">
                <div class="id">
                  기사ID
                  <input type="text" name="id" required />
                  <button
                    type="button"
                    class="redundancy_btn"
                    onclick="redundancy_id()"
                  >
                    중복확인
                  </button>
                  <div class="check_id"></div>
                </div>

                <div class="title">
                  기사제목<input type="text" name="title" required />
                </div>
                <div class="category">
                  카테고리<input type="text" name="category" required />
                </div>
              </div>
            </div>
            <div class="comment">상세내용</div>
            <div class="main_editor"><div id="editor"></div></div>
            <!-- toast ui editor -->
            <script src="https://uicdn.toast.com/editor/latest/toastui-editor-all.min.js"></script>
            <button class="submit_btn" type="button" onclick="oneclick()">
              등록
            </button>
          </div>
        </form>
      </div>
      <!-- 테이블 -->
      <div class="result_table">
        <table border="1">
          <tr>
            <th>이미지</th>
            <th>기사ID</th>
            <th>기사제목</th>
            <th>카테고리</th>
            <th>상세내용</th>
            <th>관리</th>
          </tr>

          <% for(let i=0;i < alldata.length;i++){ %>
          <tr>
            <td>
              <img
                src="<%= alldata[i].imgsrc %>"
                alt="<%= alldata[i].imgsrc %>"
                class="image_style"
              />
            </td>
            <td><%= alldata[i].id %></td>
            <td><%= alldata[i].title %></td>
            <td><%= alldata[i].category %></td>
            <td><%= alldata[i].comment %></td>
            <td>
              <button onclick="updatePage('<%= alldata[i].id %>')">수정</button>
              <button onclick="deleteData('<%= alldata[i].id %>')">삭제</button>
            </td>
          </tr>
          <% } %>
        </table>
      </div>
    </div>
  </body>

  <script src="static/js/manager.js"></script>
</html>
